CREATE TABLE IF NOT EXISTS Users (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    email VARCHAR(255) UNIQUE NOT NULL,
    login VARCHAR(40) UNIQUE NOT NULL,
    name VARCHAR(40) NOT NULL,
    birthday DATE NOT NULL
);

CREATE TABLE IF NOT EXISTS Genres (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name ENUM('Комедия', 'Драма', 'Мультфильм', 'Триллер', 'Документальный', 'Боевик') UNIQUE
);

CREATE TABLE IF NOT EXISTS Rates (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name ENUM('G', 'PG', 'PG-13', 'R', 'NC-17') UNIQUE
);

CREATE TABLE IF NOT EXISTS Films (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    name VARCHAR(40) NOT NULL,
    description VARCHAR(200),
    release_date DATE NOT NULL,
    duration INTEGER NOT NULL,
    rate_id INTEGER REFERENCES Rates
);

CREATE TABLE IF NOT EXISTS FilmGenres (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    film_id BIGINT REFERENCES Films,
    genre_id INTEGER REFERENCES Genres
);

CREATE TABLE IF NOT EXISTS Likes (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    film_id BIGINT REFERENCES Films,
    user_id BIGINT REFERENCES Users
);

CREATE TABLE IF NOT EXISTS FriendShip (
    id BIGINT GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    user_id BIGINT REFERENCES Users,
    friend_id BIGINT REFERENCES Users
);